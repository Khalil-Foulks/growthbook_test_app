var growthbook=function(t){"use strict";const n={staleTTL:6e4,cacheKey:"gbFeaturesCache",backgroundSync:!0},e={fetch:globalThis.fetch?globalThis.fetch.bind(globalThis):void 0,SubtleCrypto:globalThis.crypto?globalThis.crypto.subtle:void 0,EventSource:globalThis.EventSource};try{globalThis.localStorage&&(e.localStorage=globalThis.localStorage)}catch(t){}const r=new Map;let i=!1;const s=new Map,u=new Map,o=new Map,c=new Set;async function a(){try{if(!e.localStorage)return;await e.localStorage.setItem(n.cacheKey,JSON.stringify(Array.from(s.entries())))}catch(t){}}function l(t){const[n,e]=t.getApiInfo();return["".concat(n,"||").concat(e),n,e]}function h(t,e){const i=e.dateUpdated||"",u=new Date(Date.now()+n.staleTTL),o=s.get(t);if(o&&i&&o.version===i)return o.staleAt=u,void a();s.set(t,{data:e,version:i,staleAt:u}),a();const c=r.get(t);c&&c.forEach((t=>f(t,e)))}async function f(t,n){await(n.encryptedExperiments?t.setEncryptedExperiments(n.encryptedExperiments,void 0,e.SubtleCrypto):t.setExperiments(n.experiments||t.getExperiments())),await(n.encryptedFeatures?t.setEncryptedFeatures(n.encryptedFeatures,void 0,e.SubtleCrypto):t.setFeatures(n.features||t.getFeatures()))}async function d(t){const[n,r,i]=l(t),s=r+"/api/features/"+i;let o=u.get(n);return o||(o=e.fetch(s).then((t=>("enabled"===t.headers.get("x-sse-support")&&c.add(n),t.json()))).then((e=>(h(n,e),v(t),u.delete(n),e))).catch((t=>(u.delete(n),Promise.resolve({})))),u.set(n,o)),await o}function v(t){const[r,i,s]=l(t);if(n.backgroundSync&&c.has(r)&&e.EventSource){if(o.has(r))return;const t={src:null,cb:n=>{try{const e=JSON.parse(n.data);h(r,e),t.errors=0}catch(n){w(t,i,s)}},errors:0};o.set(r,t),y(t,i,s)}}function w(t,n,e){if(t.errors++,t.errors>3||t.src&&2===t.src.readyState){const r=Math.pow(3,t.errors-3)*(1e3+1e3*Math.random());p(t),setTimeout((()=>{y(t,n,e)}),Math.min(r,3e5))}}function p(t){t.src&&(t.src.onopen=null,t.src.onerror=null,t.src.close(),t.src=null)}function y(t,n,r){t.src=new e.EventSource("".concat(n,"/sub/").concat(r)),t.src.addEventListener("features",t.cb),t.src.onerror=()=>{w(t,n,r)},t.src.onopen=()=>{t.errors=0}}function m(t,n){p(t),o.delete(n)}function b(){c.clear(),o.forEach(m),r.clear()}var g=/^[a-zA-Z:_][a-zA-Z0-9:_.-]*$/,_={revert:function(){}},$=new Map,A=new Set;function S(t){var n=$.get(t);return n||$.set(t,n={element:t,attributes:{}}),n}function O(t,n,e,r,i){var s=e(t),u={isDirty:!1,originalValue:s,virtualValue:s,mutations:[],el:t,observer:new MutationObserver((function(){var n=e(t);n!==u.virtualValue&&(u.originalValue=n,i(u))})),mutationRunner:i,setValue:r,getCurrentValue:e};return u.observer.observe(t,function(t){return"html"===t?{childList:!0,subtree:!0,attributes:!0,characterData:!0}:{childList:!1,subtree:!1,attributes:!0,attributeFilter:[t]}}(n)),u}function E(t,n){var e=n.getCurrentValue(n.el);n.virtualValue=t,t&&"string"!=typeof t?e&&t.parentNode===e.parentNode&&t.insertBeforeNode===e.insertBeforeNode||(n.isDirty=!0,K()):t!==e&&(n.isDirty=!0,K())}function x(t){var n=t.originalValue;t.mutations.forEach((function(t){return n=t.mutate(n)})),E(function(t){return j||(j=document.createElement("div")),j.innerHTML=t,j.innerHTML}(n),t)}function k(t){var n=new Set(t.originalValue.split(/\s+/).filter(Boolean));t.mutations.forEach((function(t){return t.mutate(n)})),E(Array.from(n).filter(Boolean).join(" "),t)}function F(t){var n=t.originalValue;t.mutations.forEach((function(t){return n=t.mutate(n)})),E(n,t)}function M(t){var n=t.originalValue;t.mutations.forEach((function(t){var e=function(t){var n=t.insertBeforeSelector,e=document.querySelector(t.parentSelector);if(!e)return null;var r=n?document.querySelector(n):null;return n&&!r?null:{parentNode:e,insertBeforeNode:r}}(t.mutate());n=e||n})),E(n,t)}var T=function(t){return t.innerHTML},N=function(t,n){return t.innerHTML=n};function V(t){var n=S(t);return n.html||(n.html=O(t,"html",T,N,x)),n.html}var R=function(t){return{parentNode:t.parentElement,insertBeforeNode:t.nextElementSibling}},C=function(t,n){n.parentNode.insertBefore(t,n.insertBeforeNode)};function J(t){var n=S(t);return n.position||(n.position=O(t,"position",R,C,M)),n.position}var j,D=function(t,n){return n?t.className=n:t.removeAttribute("class")},I=function(t){return t.className};function U(t){var n=S(t);return n.classes||(n.classes=O(t,"class",I,D,k)),n.classes}function B(t,n){var e,r=S(t);return r.attributes[n]||(r.attributes[n]=O(t,n,(e=n,function(t){var n;return null!=(n=t.getAttribute(e))?n:null}),function(t){return function(n,e){return null!==e?n.setAttribute(t,e):n.removeAttribute(t)}}(n),F)),r.attributes[n]}function L(t,n,e){if(e.isDirty){e.isDirty=!1;var r=e.virtualValue;e.mutations.length||function(t,n){var e,r,i=$.get(t);if(i)if("html"===n)null==(e=i.html)||null==(r=e.observer)||r.disconnect(),delete i.html;else if("class"===n){var s,u;null==(s=i.classes)||null==(u=s.observer)||u.disconnect(),delete i.classes}else if("position"===n){var o,c;null==(o=i.position)||null==(c=o.observer)||c.disconnect(),delete i.position}else{var a,l,h;null==(a=i.attributes)||null==(l=a[n])||null==(h=l.observer)||h.disconnect(),delete i.attributes[n]}}(t,n),e.setValue(t,r)}}var q,z=!1;function P(t,n){t.html&&L(n,"html",t.html),t.classes&&L(n,"class",t.classes),t.position&&L(n,"position",t.position),Object.keys(t.attributes).forEach((function(e){L(n,e,t.attributes[e])}))}function H(){z=!1,$.forEach(P)}function K(){z||(z=!0,requestAnimationFrame(H))}function Z(t,n){var e=null;if("html"===t.kind?e=V(n):"class"===t.kind?e=U(n):"attribute"===t.kind?e=B(n,t.attribute):"position"===t.kind&&(e=J(n)),e){var r=e.mutations.indexOf(t);-1!==r&&e.mutations.splice(r,1),e.mutationRunner(e)}}function G(t){var n=new Set(t.elements),e=new Set;document.querySelectorAll(t.selector).forEach((function(r){e.add(r),n.has(r)||(t.elements.add(r),function(t,n){var e=null;"html"===t.kind?e=V(n):"class"===t.kind?e=U(n):"attribute"===t.kind?e=B(n,t.attribute):"position"===t.kind&&(e=J(n)),e&&(e.mutations.push(t),e.mutationRunner(e))}(t,r))})),n.forEach((function(n){e.has(n)||(t.elements.delete(n),Z(t,n))}))}function Q(){A.forEach(G)}function W(t){return"undefined"==typeof document?_:(A.add(t),G(t),{revert:function(){var n;(n=t).elements.forEach((function(t){return Z(n,t)})),n.elements.clear(),A.delete(n)}})}function X(t,n){return W({kind:"html",elements:new Set,mutate:n,selector:t})}function Y(t,n){return W({kind:"class",elements:new Set,mutate:n,selector:t})}function tt(t,n,e){return g.test(n)?"class"===n||"className"===n?Y(t,(function(t){var n=e(Array.from(t).join(" "));t.clear(),n&&n.split(/\s+/g).filter(Boolean).forEach((function(n){return t.add(n)}))})):W({kind:"attribute",attribute:n,elements:new Set,mutate:e,selector:t}):_}function nt(t){let n=2166136261;const e=t.length;for(let r=0;r<e;r++)n^=t.charCodeAt(r),n+=(n<<1)+(n<<4)+(n<<7)+(n<<8)+(n<<24);return n>>>0}function et(t,n,e){return 2===e?nt(nt(t+n)+"")%1e4/1e4:1===e?nt(n+t)%1e3/1e3:null}function rt(t,n){return t>=n[0]&&t<n[1]}function it(t){try{const n=t.replace(/([^\\])\//g,"$1\\/");return new RegExp(n)}catch(t){return void console.error(t)}}function st(t,n){if(!n.length)return!1;let e=!1,r=!1;for(let i=0;i<n.length;i++){const s=ut(t,n[i].type,n[i].pattern);if(!1===n[i].include){if(s)return!1}else e=!0,s&&(r=!0)}return r||!e}function ut(t,n,e){try{const r=new URL(t,"https://_");if("regex"===n){const t=it(e);return!!t&&(t.test(r.href)||t.test(r.href.substring(r.origin.length)))}return"simple"===n&&function(t,n){try{const e=new URL(n.replace(/^([^:/?]*)\./i,"https://$1.").replace(/\*/g,"_____"),"https://_____"),r=[[t.host,e.host,!1],[t.pathname,e.pathname,!0]];return e.hash&&r.push([t.hash,e.hash,!1]),e.searchParams.forEach(((n,e)=>{r.push([t.searchParams.get(e)||"",n,!1])})),!r.some((t=>!function(t,n,e){try{let r=n.replace(/[*.+?^${}()|[\]\\]/g,"\\$&").replace(/_____/g,".*");return e&&(r="\\/?"+r.replace(/(^\/|\/$)/g,"")+"\\/?"),new RegExp("^"+r+"$","i").test(t)}catch(t){return!1}}(t[0],t[1],t[2])))}catch(t){return!1}}(r,e)}catch(t){return!1}}"undefined"!=typeof document&&(q||(q=new MutationObserver((function(){Q()}))),Q(),q.observe(document.documentElement,{childList:!0,subtree:!0,attributes:!1,characterData:!1}));const ot=t=>Uint8Array.from(atob(t),(t=>t.charCodeAt(0)));async function ct(t,n,e){if(n=n||"",!(e=e||globalThis.crypto&&globalThis.crypto.subtle))throw new Error("No SubtleCrypto implementation found");try{const r=await e.importKey("raw",ot(n),{name:"AES-CBC",length:128},!0,["encrypt","decrypt"]),[i,s]=t.split("."),u=await e.decrypt({name:"AES-CBC",iv:ot(i)},r,ot(s));return(new TextDecoder).decode(u)}catch(t){throw new Error("Failed to decrypt")}}function at(t){const n=t.replace(/(^v|\+.*$)/g,"").split(/[-.]/);return 3===n.length&&n.push("~"),n.map((t=>t.match(/^[0-9]+$/)?t.padStart(5," "):t)).join("-")}const lt={};function ht(t,n){if("$or"in n)return yt(t,n.$or);if("$nor"in n)return!yt(t,n.$nor);if("$and"in n)return function(t,n){for(let e=0;e<n.length;e++)if(!ht(t,n[e]))return!1;return!0}(t,n.$and);if("$not"in n)return!ht(t,n.$not);for(const[e,r]of Object.entries(n))if(!dt(r,ft(t,e)))return!1;return!0}function ft(t,n){const e=n.split(".");let r=t;for(let t=0;t<e.length;t++){if(!r||"object"!=typeof r||!(e[t]in r))return null;r=r[e[t]]}return r}function dt(t,n){if("string"==typeof t)return n+""===t;if("number"==typeof t)return 1*n===t;if("boolean"==typeof t)return!!n===t;if(null===t)return null===n;if(Array.isArray(t)||!vt(t))return JSON.stringify(n)===JSON.stringify(t);for(const e in t)if(!pt(e,n,t[e]))return!1;return!0}function vt(t){const n=Object.keys(t);return n.length>0&&n.filter((t=>"$"===t[0])).length===n.length}function wt(t,n){return Array.isArray(t)?t.some((t=>n.includes(t))):n.includes(t)}function pt(t,n,e){switch(t){case"$veq":return at(n)===at(e);case"$vne":return at(n)!==at(e);case"$vgt":return at(n)>at(e);case"$vgte":return at(n)>=at(e);case"$vlt":return at(n)<at(e);case"$vlte":return at(n)<=at(e);case"$eq":return n===e;case"$ne":return n!==e;case"$lt":return n<e;case"$lte":return n<=e;case"$gt":return n>e;case"$gte":return n>=e;case"$exists":return e?null!==n:null===n;case"$in":return!!Array.isArray(e)&&wt(n,e);case"$nin":return!!Array.isArray(e)&&!wt(n,e);case"$not":return!dt(e,n);case"$size":return!!Array.isArray(n)&&dt(e,n.length);case"$elemMatch":return function(t,n){if(!Array.isArray(t))return!1;const e=vt(n)?t=>dt(n,t):t=>ht(t,n);for(let n=0;n<t.length;n++)if(t[n]&&e(t[n]))return!0;return!1}(n,e);case"$all":if(!Array.isArray(n))return!1;for(let t=0;t<e.length;t++){let r=!1;for(let i=0;i<n.length;i++)if(dt(e[t],n[i])){r=!0;break}if(!r)return!1}return!0;case"$regex":try{return(r=e,lt[r]||(lt[r]=new RegExp(r.replace(/([^\\])\//g,"$1\\/"))),lt[r]).test(n)}catch(t){return!1}case"$type":return function(t){if(null===t)return"null";if(Array.isArray(t))return"array";const n=typeof t;return["string","number","boolean","object","undefined"].includes(n)?n:"unknown"}(n)===e;default:return console.error("Unknown operator: "+t),!1}var r}function yt(t,n){if(!n.length)return!0;for(let e=0;e<n.length;e++)if(ht(t,n[e]))return!0;return!1}const mt="undefined"!=typeof window&&"undefined"!=typeof document;return t.GrowthBook=class{constructor(t){this.t=this.context=t=t||{},this.i=null,this.u=new Set,this.o={},this.debug=!1,this.l=new Set,this.h=[],this.v=0,this.ready=!1,this.p=new Map,this.m=new Map,this.g={},this._=new Map,t.features&&(this.ready=!0),mt&&t.enableDevMode&&(window._growthbook=this,document.dispatchEvent(new Event("gbloaded"))),t.experiments&&(this.ready=!0,this.$()),t.clientKey&&this.A({},!0,!1)}async loadFeatures(t){await this.A(t,!0,!0),t&&t.autoRefresh&&function(t){const[n]=l(t),e=r.get(n)||new Set;e.add(t),r.set(n,e)}(this)}async refreshFeatures(t){await this.A(t,!1,!0)}getApiInfo(){return[(this.t.apiHost||"https://cdn.growthbook.io").replace(/\/*$/,""),this.t.clientKey||""]}async A(t,r,u){if(t=t||{},!this.t.clientKey)throw new Error("Missing clientKey");await async function(t,r,u,o,c){const a=await async function(t,r,u,o){const[c]=l(t),a=new Date;await async function(){if(!i){i=!0;try{if(e.localStorage){const t=await e.localStorage.getItem(n.cacheKey);if(t){const n=JSON.parse(t);n&&Array.isArray(n)&&n.forEach((t=>{let[n,e]=t;s.set(n,{...e,staleAt:new Date(e.staleAt)})}))}}}catch(t){}}}();const h=s.get(c);if(h&&!o&&(r||h.staleAt>a))return h.staleAt<a?d(t):v(t),h.data;{const n=await function(t,n){return new Promise((e=>{let r,i=!1;const s=t=>{i||(i=!0,r&&clearTimeout(r),e(t||null))};n&&(r=setTimeout((()=>s()),n)),t.then((t=>s(t))).catch((()=>s()))}))}(d(t),u);return n}}(t,o,r,u);c&&a&&await f(t,a)}(this,t.timeout,t.skipCache||this.t.enableDevMode,r,u)}S(){this.i&&this.i()}setFeatures(t){this.t.features=t,this.ready=!0,this.S()}async setEncryptedFeatures(t,n,e){const r=await ct(t,n||this.t.decryptionKey,e);this.setFeatures(JSON.parse(r))}setExperiments(t){this.t.experiments=t,this.ready=!0,this.$()}async setEncryptedExperiments(t,n,e){const r=await ct(t,n||this.t.decryptionKey,e);this.setExperiments(JSON.parse(r))}setAttributes(t){this.t.attributes=t,this.S(),this.$()}setAttributeOverrides(t){this.g=t,this.S(),this.$()}setForcedVariations(t){this.t.forcedVariations=t||{},this.S(),this.$()}setForcedFeatures(t){this.m=t,this.S()}setURL(t){this.t.url=t,this.$(!0)}getAttributes(){return{...this.t.attributes,...this.g}}getFeatures(){return this.t.features||{}}getExperiments(){return this.t.experiments||[]}subscribe(t){return this.l.add(t),()=>{this.l.delete(t)}}getAllResults(){return new Map(this.p)}destroy(){var t;this.l.clear(),this.p.clear(),this.u.clear(),this.o={},this.h=[],this.v&&clearTimeout(this.v),t=this,r.forEach((n=>n.delete(t))),mt&&window._growthbook===this&&delete window._growthbook,this._.forEach((t=>{t.undo()})),this._.clear()}setRenderer(t){this.i=t}forceVariation(t,n){this.t.forcedVariations=this.t.forcedVariations||{},this.t.forcedVariations[t]=n,this.S()}run(t){const n=this.O(t,null);return this.k(t,n),n}triggerExperiment(t){if(!this.t.experiments)return null;const n=this.t.experiments.find((n=>n.key===t));return n&&n.manual?this.F(n,!0):null}F(t,n,e){const r=t.key,i=this._.get(r);if(t.manual&&!n&&!i)return null;const s=this.run(t),u=JSON.stringify(s.value);if(!e&&s.inExperiment&&i&&i.valueHash===u)return s;if(i&&this.M(r),s.inExperiment){const n=this.T(s.value);n&&this._.set(t.key,{undo:n,valueHash:u})}return s}M(t){const n=this._.get(t);n&&(n.undo(),this._.delete(t))}$(t){const n=this.t.experiments||[],e=new Set(n.map((t=>t.key)));this._.forEach(((t,n)=>{e.has(n)||(t.undo(),this._.delete(n))})),n.forEach((n=>{this.F(n,!1,t)}))}k(t,n){const e=t.key,r=this.p.get(e);r&&r.result.inExperiment===n.inExperiment&&r.result.variationId===n.variationId||(this.p.set(e,{experiment:t,result:n}),this.l.forEach((e=>{try{e(t,n)}catch(t){console.error(t)}})))}N(t,n){if("override"===n.source)return;const e=JSON.stringify(n.value);if(this.o[t]!==e){if(this.o[t]=e,this.t.onFeatureUsage)try{this.t.onFeatureUsage(t,n)}catch(t){}mt&&window.fetch&&(this.h.push({key:t,on:n.on}),this.v||(this.v=window.setTimeout((()=>{this.v=0;const t=[...this.h];this.h=[],this.t.realtimeKey&&window.fetch("https://rt.growthbook.io/?key=".concat(this.t.realtimeKey,"&events=").concat(encodeURIComponent(JSON.stringify(t))),{cache:"no-cache",mode:"no-cors"}).catch((()=>{}))}),this.t.realtimeInterval||2e3)))}}V(t,n,e,r,i,s){const u={value:n,on:!!n,off:!n,source:e,ruleId:r||""};return i&&(u.experiment=i),s&&(u.experimentResult=s),this.N(t,u),u}isOn(t){return this.evalFeature(t).on}isOff(t){return this.evalFeature(t).off}getFeatureValue(t,n){const e=this.evalFeature(t).value;return null===e?n:e}feature(t){return this.evalFeature(t)}evalFeature(t){if(this.m.has(t))return this.V(t,this.m.get(t),"override");if(!this.t.features||!this.t.features[t])return this.V(t,null,"unknownFeature");const n=this.t.features[t];if(n.rules)for(const e of n.rules){if(e.condition&&!this.R(e.condition))continue;if(e.filters&&this.C(e.filters))continue;if("force"in e){if(!this.J(e.seed||t,e.hashAttribute,e.range,e.coverage,e.hashVersion))continue;return e.tracks&&e.tracks.forEach((t=>{this.j(t.experiment,t.result)})),this.V(t,e.force,"force",e.id)}if(!e.variations)continue;const n={variations:e.variations,key:e.key||t};"coverage"in e&&(n.coverage=e.coverage),e.weights&&(n.weights=e.weights),e.hashAttribute&&(n.hashAttribute=e.hashAttribute),e.namespace&&(n.namespace=e.namespace),e.meta&&(n.meta=e.meta),e.ranges&&(n.ranges=e.ranges),e.name&&(n.name=e.name),e.phase&&(n.phase=e.phase),e.seed&&(n.seed=e.seed),e.hashVersion&&(n.hashVersion=e.hashVersion),e.filters&&(n.filters=e.filters);const r=this.O(n,t);if(this.k(n,r),r.inExperiment&&!r.passthrough)return this.V(t,r.value,"experiment",e.id,n,r)}return this.V(t,void 0===n.defaultValue?null:n.defaultValue,"defaultValue")}J(t,n,e,r,i){if(!e&&void 0===r)return!0;const{hashValue:s}=this.D(n);if(!s)return!1;const u=et(t,s,i||1);return null!==u&&(e?rt(u,e):void 0===r||u<=r)}R(t){return ht(this.getAttributes(),t)}C(t){return t.some((t=>{const{hashValue:n}=this.D(t.attribute);if(!n)return!0;const e=et(t.seed,n,t.hashVersion||2);return null===e||!t.ranges.some((t=>rt(e,t)))}))}O(t,n){const e=t.key,r=t.variations.length;if(r<2)return this.I(t,-1,!1,n);if(!1===this.t.enabled)return this.I(t,-1,!1,n);t=this.U(t);const i=function(t,n,e){if(!n)return null;const r=n.split("?")[1];if(!r)return null;const i=r.replace(/#.*/,"").split("&").map((t=>t.split("=",2))).filter((n=>{let[e]=n;return e===t})).map((t=>{let[,n]=t;return parseInt(n)}));return i.length>0&&i[0]>=0&&i[0]<e?i[0]:null}(e,this.B(),r);if(null!==i)return this.I(t,i,!1,n);if(this.t.forcedVariations&&e in this.t.forcedVariations)return this.I(t,this.t.forcedVariations[e],!1,n);if("draft"===t.status||!1===t.active)return this.I(t,-1,!1,n);const{hashValue:s}=this.D(t.hashAttribute);if(!s)return this.I(t,-1,!1,n);if(t.filters){if(this.C(t.filters))return this.I(t,-1,!1,n)}else if(t.namespace&&!function(t,n){const e=et("__"+n[0],t,1);return null!==e&&e>=n[1]&&e<n[2]}(s,t.namespace))return this.I(t,-1,!1,n);if(t.include&&!function(t){try{return t()}catch(t){return console.error(t),!1}}(t.include))return this.I(t,-1,!1,n);if(t.condition&&!this.R(t.condition))return this.I(t,-1,!1,n);if(t.groups&&!this.L(t.groups))return this.I(t,-1,!1,n);if(t.url&&!this.q(t.url))return this.I(t,-1,!1,n);if(t.urlPatterns&&!st(this.B(),t.urlPatterns))return this.I(t,-1,!1,n);const u=et(t.seed||e,s,t.hashVersion||1);if(null===u)return this.I(t,-1,!1,n);const o=function(t,n){for(let e=0;e<n.length;e++)if(rt(t,n[e]))return e;return-1}(u,t.ranges||function(t,n,e){(n=void 0===n?1:n)<0?n=0:n>1&&(n=1);const r=(i=t)<=0?[]:new Array(i).fill(1/i);var i;(e=e||r).length!==t&&(e=r);const s=e.reduce(((t,n)=>n+t),0);(s<.99||s>1.01)&&(e=r);let u=0;return e.map((t=>{const e=u;return u+=t,[e,e+n*t]}))}(r,void 0===t.coverage?1:t.coverage,t.weights));if(o<0)return this.I(t,-1,!1,n);if("force"in t)return this.I(t,void 0===t.force?-1:t.force,!1,n);if(this.t.qaMode)return this.I(t,-1,!1,n);if("stopped"===t.status)return this.I(t,-1,!1,n);const c=this.I(t,o,!0,n,u);return this.j(t,c),c}log(t,n){this.debug&&(this.t.log?this.t.log(t,n):console.log(t,n))}j(t,n){if(!this.t.trackingCallback)return;const e=n.hashAttribute+n.hashValue+t.key+n.variationId;if(!this.u.has(e)){this.u.add(e);try{this.t.trackingCallback(t,n)}catch(t){console.error(t)}}}U(t){const n=t.key,e=this.t.overrides;return e&&e[n]&&"string"==typeof(t=Object.assign({},t,e[n])).url&&(t.url=it(t.url)),t}D(t){const n=t||"id";let e="";return this.g[n]?e=this.g[n]:this.t.attributes?e=this.t.attributes[n]||"":this.t.user&&(e=this.t.user[n]||""),{hashAttribute:n,hashValue:e}}I(t,n,e,r,i){let s=!0;(n<0||n>=t.variations.length)&&(n=0,s=!1);const{hashAttribute:u,hashValue:o}=this.D(t.hashAttribute),c=t.meta?t.meta[n]:{},a={key:c.key||""+n,featureId:r,inExperiment:s,hashUsed:e,variationId:n,value:t.variations[n],hashAttribute:u,hashValue:o};return c.name&&(a.name=c.name),void 0!==i&&(a.bucket=i),c.passthrough&&(a.passthrough=c.passthrough),a}B(){return this.t.url||(mt?window.location.href:"")}q(t){const n=this.B();if(!n)return!1;const e=n.replace(/^https?:\/\//,"").replace(/^[^/]*\//,"/");return!!t.test(n)||!!t.test(e)}L(t){const n=this.t.groups||{};for(let e=0;e<t.length;e++)if(n[t[e]])return!0;return!1}T(t){if(!mt)return;const n=[];if(t.css){const e=document.createElement("style");e.innerHTML=t.css,document.head.appendChild(e),n.push((()=>e.remove()))}if(t.js){const e=document.createElement("script");e.innerHTML=t.js,document.body.appendChild(e),n.push((()=>e.remove()))}return t.domMutations&&t.domMutations.forEach((t=>{n.push(function(t){var n=t.selector,e=t.action,r=t.value,i=t.attribute,s=t.parentSelector,u=t.insertBeforeSelector;if("html"===i){if("append"===e)return X(n,(function(t){return t+(null!=r?r:"")}));if("set"===e)return X(n,(function(){return null!=r?r:""}))}else if("class"===i){if("append"===e)return Y(n,(function(t){r&&t.add(r)}));if("remove"===e)return Y(n,(function(t){r&&t.delete(r)}));if("set"===e)return Y(n,(function(t){t.clear(),r&&t.add(r)}))}else if("position"===i){if("set"===e&&s)return function(t,n){return W({kind:"position",elements:new Set,mutate:function(){return{insertBeforeSelector:u,parentSelector:s}},selector:t})}(n)}else{if("append"===e)return tt(n,i,(function(t){return null!==t?t+(null!=r?r:""):null!=r?r:""}));if("set"===e)return tt(n,i,(function(){return null!=r?r:""}));if("remove"===e)return tt(n,i,(function(){return null}))}return _}(t).revert)})),()=>{n.forEach((t=>t()))}}},t.clearCache=async function(){s.clear(),u.clear(),b(),i=!1,await a()},t.configureCache=function(t){Object.assign(n,t),n.backgroundSync||b()},t.isURLTargeted=st,t.setPolyfills=function(t){Object.assign(e,t)},Object.defineProperty(t,"P",{value:!0}),t}({});
//# sourceMappingURL=index.min.js.map
